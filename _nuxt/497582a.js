(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{280:function(t,e,n){var content=n(282);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(52).default)("efda7512",content,!0,{sourceMap:!1})},281:function(t,e,n){"use strict";n(280)},282:function(t,e,n){(e=n(51)(!1)).push([t.i,".admin-panel[data-v-142b680c]{margin-bottom:50px}.name[data-v-142b680c]{font-size:18px;line-height:115%;font-family:Futura PT;color:#77797d;margin-right:5px}.admin[data-v-142b680c]{align-items:center;justify-content:flex-end}.admin .avatar[data-v-142b680c]{margin-right:10px}.avatar img[data-v-142b680c]{width:40px;height:40px;border-radius:50px}.open-toggle[data-v-142b680c]{cursor:pointer}.admin-panel:hover .panel[data-v-142b680c]{opacity:1}.panel[data-v-142b680c]{border:1px solid #e2e2e2;background:#f3f1f1;padding:7px 7px 7px 20px;opacity:0;width:160px}.panel-active[data-v-142b680c]{opacity:1}.panel li[data-v-142b680c]{list-style-type:none;border-bottom:1px solid #e2e2e2}.panel li a[data-v-142b680c]{color:#000;text-decoration:none}.panel ul[data-v-142b680c]{padding:0;margin:0;text-align:center}",""]),t.exports=e},283:function(t,e,n){"use strict";n.r(e);var o={data:function(){return{isActive:!1}},computed:{user:function(){return this.$store.state.user}}},r=(n(281),n(41)),component=Object(r.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.user?n("div",{staticClass:"row admin-panel"},[n("div",{staticClass:"col-12 admin d-flex"},[t._m(0),t._v(" "),n("div",{staticClass:"name"},[t._v(t._s(t.user.name))]),t._v(" "),t._m(1)]),t._v(" "),n("div",{staticClass:"col-12 admin d-flex"},[n("div",{staticClass:"panel"},[n("ul",[n("li",[n("nuxt-link",{attrs:{to:{name:"admin"}},nativeOn:{click:function(e){t.$cookies.set("token",""),t.$store.commit("setUser",null)}}},[t._v("Выход")])],1)])])])]):t._e()}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"avatar"},[e("img",{attrs:{src:"/images/avatar.png",alt:""}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"open-toggle"},[e("img",{attrs:{src:"/images/dropdown-toggle.png",alt:""}})])}],!1,null,"142b680c",null);e.default=component.exports},287:function(t,e,n){var content=n(301);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(52).default)("6ba9a571",content,!0,{sourceMap:!1})},288:function(t,e,n){var content=n(303);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(52).default)("0a5d08e2",content,!0,{sourceMap:!1})},297:function(t,e,n){"use strict";n.r(e);n(6);var o={name:"user",props:{id:{type:Number,default:null},name:{type:String,default:""},photo:{type:String,default:""},description:{type:String,default:""},startData:{type:String,default:""},endData:{type:String,default:""},active:{type:Boolean,default:!0},startups:{type:Array,default:function(){return[]}}}},r=(n(300),n(41)),component=Object(r.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"col-12 col-lg-3 mb-3"},[n("div",{staticClass:"user"},[n("div",{staticClass:"edit"},[n("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-2",modifiers:{"modal-2":!0}}],staticClass:"change",on:{click:function(e){return t.$emit("getSetEdit")}}},[n("img",{attrs:{src:"images/edit.svg",alt:""}})]),t._v(" "),n("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-delete",modifiers:{"modal-delete":!0}}],staticClass:"delete",on:{click:function(e){return t.$emit("removeSet")}}},[n("img",{attrs:{src:"images/delete.svg",alt:""}})])],1),t._v(" "),n("div",{staticClass:"user-photo"},[t.photo?n("img",{attrs:{src:t.photo.url,alt:""}}):t._e(),t._v(" "),t.photo?t._e():n("img",{attrs:{src:"/images/set1.png",alt:""}})]),t._v(" "),n("div",{staticClass:"user-login"},[t._v(t._s(t.name))]),t._v(" "),n("button",{staticClass:"details",on:{click:function(e){return t.$emit("getSet")}}},[t._v("\n            Подробнее "),n("img",{attrs:{src:"images/arrow.svg",alt:""}})])])])}),[],!1,null,"67b79524",null);e.default=component.exports},300:function(t,e,n){"use strict";n(287)},301:function(t,e,n){(e=n(51)(!1)).push([t.i,".user[data-v-67b79524]{background:#3a3a3a;padding:10px;text-align:left;height:100%}.user:hover .details[data-v-67b79524],.user:hover .edit[data-v-67b79524]{opacity:1}.user[data-v-67b79524]:hover{box-shadow:0 2px 22px rgba(27,32,44,.25);background:#535353}.user-login[data-v-67b79524]{font-family:Roboto;font-style:normal;font-weight:400;font-size:16px;line-height:19px;color:#fff;margin-top:60px;text-align:left;cursor:pointer}.user-photo img[data-v-67b79524]{text-align:center;width:100%;height:150px}.details[data-v-67b79524]{font-family:Montserrat;font-style:normal;font-weight:400;font-size:16px;line-height:20px;color:#fff;text-align:left;cursor:pointer;opacity:0;border:none;background:transparent;margin-top:10px}.btn[data-v-67b79524]{padding:0}.edit[data-v-67b79524]{display:flex;justify-content:flex-end;margin-bottom:5px;opacity:0}.edit .change[data-v-67b79524]{margin-right:10px}.edit .change[data-v-67b79524],.edit .delete[data-v-67b79524]{cursor:pointer;border:none;background:transparent;padding:0}",""]),t.exports=e},302:function(t,e,n){"use strict";n(288)},303:function(t,e,n){(e=n(51)(!1)).push([t.i,".main[data-v-95e1a77c]{margin-top:30px}.name[data-v-95e1a77c]{font-family:Futura PT;font-size:18px;line-height:115%;color:#77797d}.admin[data-v-95e1a77c]{align-items:center;justify-content:flex-end;margin-bottom:90px}.admin .avatar[data-v-95e1a77c]{margin-right:10px}.control-tracker[data-v-95e1a77c]{display:flex;justify-content:space-between;align-items:center;margin-bottom:50px}.control-tracker .users[data-v-95e1a77c]{font-family:Montserrat;font-style:normal;font-weight:700;font-size:24px;line-height:120%;letter-spacing:-.03em;color:#333}.btn-add[data-v-95e1a77c]{background:#106466;font-family:Roboto;font-style:normal;font-weight:400;font-size:16px;line-height:19px;padding:13px 25px;text-align:center;color:#fff;border-radius:0!important}.btn-add[data-v-95e1a77c],.tracker[data-v-95e1a77c]{display:flex;align-items:center}.tracker[data-v-95e1a77c]{justify-content:space-between;margin-bottom:50px}.add-tracker .text[data-v-95e1a77c]{font-family:Roboto;font-size:20px;line-height:21px;display:flex;align-items:center;color:#000}.add-tracker .avatar[data-v-95e1a77c]{width:120px;height:120px;background:#c4c4c4;border:1px solid #000;border-radius:50%;overflow:hidden}.add-tracker .close[data-v-95e1a77c]{position:absolute;top:10px;right:10px}.add-tracker .avatar img[data-v-95e1a77c]{width:100%}form .text-form[data-v-95e1a77c]{font-family:Roboto;font-style:normal;font-weight:400;font-size:18px;line-height:16px;color:#000;margin-bottom:10px}form input[data-v-95e1a77c]{width:250px;padding:10px}form input[data-v-95e1a77c],form textarea[data-v-95e1a77c]{margin-bottom:50px}.user-block[data-v-95e1a77c]{display:flex;align-items:center;justify-content:space-between}.check-block[data-v-95e1a77c]{width:40px;height:40px;border:1px solid #000;margin-left:10px;text-align:center}.delete-tracker .text[data-v-95e1a77c]{font-family:Roboto;font-size:20px;line-height:21px;color:#000;text-align:center;margin-bottom:30px;margin-top:20px}.delete-tracker .close[data-v-95e1a77c]{position:absolute;top:10px;right:10px}.dlt[data-v-95e1a77c]{cursor:pointer}",""]),t.exports=e},318:function(t,e,n){"use strict";n.r(e);n(18),n(53),n(62),n(199),n(56);var o=n(19),r={name:"sets",components:{Set:n(297).default},middleware:"authenticated",data:function(){return{url:null,file:"",removedSetId:"",newSet:{logo:{}},activeSet:{},sets:[],logo:{}}},created:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$axios.$get("https://monzun-admin.herokuapp.com/api/trackings",{headers:{Authorization:"Bearer "+t.$cookies.get("token")}});case 2:t.sets=e.sent,console.log(t.sets);case 4:case"end":return e.stop()}}),e)})))()},methods:{addSet:function(){var t=this;this.$axios.$post("https://monzun-admin.herokuapp.com/api/trackings",this.newSet,{headers:{Authorization:"Bearer "+this.$cookies.get("token")}}).then((function(e){t.$bvToast.toast("Набор добавлен!",{title:"Добавление Набора",variant:"success"}),t.sets={},t.updateSet()})).catch((function(e){t.$bvToast.toast("ошибка",{title:"Не удалось добавить набор",variant:"danger",solid:!0})})),this.newSet={}},getSet:function(t){this.$router.push({name:"sets-id",params:{id:t}})},getSetEdit:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,e.$axios.$get("https://monzun-admin.herokuapp.com/api/trackings/".concat(t),{headers:{Authorization:"Bearer "+e.$cookies.get("token")}});case 3:e.activeSet=n.sent,e.$refs.editSet.show(),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),e.$bvToast.toast("Не удалось получить данные набора.",{title:"набор не найден.",variant:"danger",solid:!0});case 10:case"end":return n.stop()}}),n,null,[[0,7]])})))()},editSet:function(t){var e=this;this.$axios.$put("https://monzun-admin.herokuapp.com/api/trackings/".concat(t),this.activeSet,{headers:{Authorization:"Bearer "+this.$cookies.get("token")}}).then((function(t){e.$bvToast.toast("Набор изменен!",{title:"Изменение набора",variant:"success"}),e.sets={},e.updateSet()})).catch((function(t){e.$bvToast.toast("ошибка",{title:"Не удалось изменить набор",variant:"danger",solid:!0})})),this.activeSet={}},deleteSet:function(t){var e=this;this.$axios.$delete("https://monzun-admin.herokuapp.com/api/trackings/".concat(t),{headers:{Authorization:"Bearer "+this.$cookies.get("token")}}).then((function(t){e.$bvToast.toast("Набор удален!",{title:"удаление набора",variant:"success"}),e.sets={},e.updateSet()})).catch((function(t){e.$bvToast.toast("ошибка",{title:"Не удалось удалить набор",variant:"danger",solid:!0})})),this.removedSetId=""},onFileChange:function(t){var e=this,n=t.target.files[0];this.url=URL.createObjectURL(n),t.target.files[0].size>5e6&&(alert("File is too big!"),this.$refs.file.value=null),this.file=this.$refs.file.files[0];var o=new FormData;o.append("files",this.file),this.$axios.$post("https://monzun-admin.herokuapp.com/api/attachment/upload-image",o,{headers:{Authorization:"Bearer "+this.$cookies.get("token")}}).then((function(t){e.$bvToast.toast("Изображение добавлено!",{title:"Добавление изображения",variant:"success"}),e.logo=t,e.newSet.logoId=e.logo.id,e.activeSet.logoId=e.logo.id})).catch((function(t){e.$bvToast.toast("ошибка",{title:"Не удалось отправить изображение",variant:"danger",solid:!0})}))},deleteImage:function(){var t=this;console.log(this.activeSet),this.$axios.$delete("https://monzun-admin.herokuapp.com/api/attachment/delete/".concat(this.logo.uuid),{headers:{Authorization:"Bearer "+this.$cookies.get("token")}}).then((function(e){t.$bvToast.toast("Изображение удалено!",{title:"удаление изображений",variant:"success"}),t.$refs.file.value=null})).catch((function(e){t.$bvToast.toast("ошибка",{title:"Не удалось удалить изображение",variant:"danger",solid:!0})}))},updateSet:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$axios.$get("https://monzun-admin.herokuapp.com/api/trackings",{headers:{Authorization:"Bearer "+t.$cookies.get("token")}});case 2:t.sets=e.sent;case 3:case"end":return e.stop()}}),e)})))()}}},c=(n(302),n(41)),component=Object(c.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"main"},[n("Admin"),t._v(" "),n("div",{staticClass:"row"},[n("div",{staticClass:"col-12 control-tracker"},[n("div",{staticClass:"users"},[t._v("Все наборы")]),t._v(" "),n("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-1",modifiers:{"modal-1":!0}}],staticClass:"btn btn-add"},[t._v("\n                Добавить набор")])],1)]),t._v(" "),n("div",{staticClass:"row"},t._l(t.sets,(function(e,o){return n("Set",{key:o,attrs:{name:e.name,photo:e.logo,id:e.id},on:{getSet:function(n){return t.getSet(e.id)},getSetEdit:function(n){return t.getSetEdit(e.id)},removeSet:function(n){t.removedSetId=e.id}}})})),1),t._v(" "),n("b-modal",{attrs:{centered:"","hide-header":"","ok-title":"Добавить","cancel-title":"Отмена",id:"modal-1"},on:{ok:t.addSet}},[n("div",{staticClass:"add-tracker"},[n("div",{staticClass:"tracker"},[n("div",{staticClass:"text"},[t._v("Добавление набора")]),t._v(" "),n("div",[n("div",[t.url?t._e():n("img",{staticClass:"avatar mb-2",attrs:{src:"/images/set1.png",alt:""}}),t._v(" "),t.url?n("img",{staticClass:"avatar mb-2",attrs:{src:t.url}}):t._e()]),t._v(" "),n("div",{staticClass:"d-flex"},[n("input",{ref:"file",attrs:{type:"file",id:"file",accept:"image/x-png,image/gif,image/jpeg"},on:{change:t.onFileChange}}),t._v(" "),n("div",{staticClass:"dlt",on:{click:t.deleteImage}},[n("img",{attrs:{src:"/images/delete.png",alt:""}})])])])]),t._v(" "),n("form",[n("div",{staticClass:"name d-flex justify-content-between"},[n("div",[n("div",{staticClass:"text-form"},[t._v("Название набора")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.newSet.name,expression:"newSet.name"}],attrs:{type:"text"},domProps:{value:t.newSet.name},on:{input:function(e){e.target.composing||t.$set(t.newSet,"name",e.target.value)}}})]),t._v(" "),n("div",[t._v("\n                        Активен\n                        "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.newSet.active,expression:"newSet.active"}],attrs:{type:"checkbox",checked:""},domProps:{checked:Array.isArray(t.newSet.active)?t._i(t.newSet.active,null)>-1:t.newSet.active},on:{change:function(e){var n=t.newSet.active,o=e.target,r=!!o.checked;if(Array.isArray(n)){var c=t._i(n,null);o.checked?c<0&&t.$set(t.newSet,"active",n.concat([null])):c>-1&&t.$set(t.newSet,"active",n.slice(0,c).concat(n.slice(c+1)))}else t.$set(t.newSet,"active",r)}}})])]),t._v(" "),n("div",{staticClass:"description"},[n("div",{staticClass:"text-form"},[t._v("Описание")]),t._v(" "),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.newSet.description,expression:"newSet.description"}],attrs:{name:"description",id:"",cols:"80",rows:"10"},domProps:{value:t.newSet.description},on:{input:function(e){e.target.composing||t.$set(t.newSet,"description",e.target.value)}}})]),t._v(" "),n("div",{staticClass:"date d-flex justify-content-around"},[n("div",{staticClass:"start-date"},[n("div",{staticClass:"text-form"},[t._v("Дата начала:")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.newSet.startedAt,expression:"newSet.startedAt"}],attrs:{type:"date",name:""},domProps:{value:t.newSet.startedAt},on:{input:function(e){e.target.composing||t.$set(t.newSet,"startedAt",e.target.value)}}})]),t._v(" "),n("div",{staticClass:"end-date"},[n("div",{staticClass:"text-form"},[t._v("Дата конца:")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.newSet.endedAt,expression:"newSet.endedAt"}],attrs:{type:"date",name:""},domProps:{value:t.newSet.endedAt},on:{input:function(e){e.target.composing||t.$set(t.newSet,"endedAt",e.target.value)}}})])])]),t._v(" "),n("div",{staticClass:"close",on:{click:function(e){return t.$bvModal.hide("modal-1")}}},[n("img",{attrs:{src:"/images/close-modal.svg",alt:""}})])])]),t._v(" "),n("b-modal",{attrs:{centered:"","hide-header":"","ok-title":"Да","cancel-title":"Нет",id:"modal-delete"},on:{hidden:function(e){t.removedSetId=""},ok:function(e){return t.deleteSet(t.removedSetId)}}},[n("div",{staticClass:"delete-tracker"},[n("div",{staticClass:"text"},[t._v("Вы действительно хотите удалить ?")]),t._v(" "),n("div",{staticClass:"close",on:{click:function(e){return t.$bvModal.hide("modal-delete")}}},[n("img",{attrs:{src:"/images/close-modal.svg",alt:""}})])])]),t._v(" "),n("b-modal",{ref:"editSet",attrs:{centered:"","hide-header":"","ok-title":"Изменить","cancel-title":"Отмена",id:"modal-2"},on:{ok:function(e){return t.editSet(t.activeSet.id)}}},[n("div",{staticClass:"add-tracker"},[n("div",{staticClass:"tracker"},[n("div",{staticClass:"text"},[t._v("Редактирование набора")]),t._v(" "),n("div",[n("div",[t.activeSet.logo?t._e():n("img",{staticClass:"avatar mb-2",attrs:{src:"/images/set1.png",alt:""}}),t._v(" "),t.activeSet.logo?n("img",{staticClass:"avatar mb-2",attrs:{src:t.activeSet.logo.url}}):t._e()]),t._v(" "),n("div",{staticClass:"d-flex"},[n("input",{ref:"file",attrs:{type:"file",id:"file",accept:"image/x-png,image/gif,image/jpeg"},on:{change:t.onFileChange}}),t._v(" "),n("div",{staticClass:"dlt",on:{click:t.deleteImage}},[n("img",{attrs:{src:"/images/delete.png",alt:""}})])])])]),t._v(" "),n("form",[n("div",{staticClass:"name d-flex justify-content-between"},[n("div",{staticClass:"name"},[n("div",{staticClass:"text-form"},[t._v("Название набора")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.activeSet.name,expression:"activeSet.name"}],attrs:{type:"text"},domProps:{value:t.activeSet.name},on:{input:function(e){e.target.composing||t.$set(t.activeSet,"name",e.target.value)}}})]),t._v(" "),n("div",[t._v("\n                        Активен\n                        "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.activeSet.active,expression:"activeSet.active"}],attrs:{type:"checkbox",checked:""},domProps:{checked:Array.isArray(t.activeSet.active)?t._i(t.activeSet.active,null)>-1:t.activeSet.active},on:{change:function(e){var n=t.activeSet.active,o=e.target,r=!!o.checked;if(Array.isArray(n)){var c=t._i(n,null);o.checked?c<0&&t.$set(t.activeSet,"active",n.concat([null])):c>-1&&t.$set(t.activeSet,"active",n.slice(0,c).concat(n.slice(c+1)))}else t.$set(t.activeSet,"active",r)}}})])]),t._v(" "),n("div",{staticClass:"description"},[n("div",{staticClass:"text-form"},[t._v("Описание")]),t._v(" "),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.activeSet.description,expression:"activeSet.description"}],attrs:{name:"description",id:"",cols:"80",rows:"10"},domProps:{value:t.activeSet.description},on:{input:function(e){e.target.composing||t.$set(t.activeSet,"description",e.target.value)}}})]),t._v(" "),n("div",{staticClass:"date d-flex justify-content-around"},[n("div",{staticClass:"start-date"},[n("div",{staticClass:"text-form"},[t._v("Дата начала:")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.activeSet.startedAt,expression:"activeSet.startedAt"}],attrs:{type:"date",name:""},domProps:{value:t.activeSet.startedAt},on:{input:function(e){e.target.composing||t.$set(t.activeSet,"startedAt",e.target.value)}}})]),t._v(" "),n("div",{staticClass:"end-date"},[n("div",{staticClass:"text-form"},[t._v("Дата конца:")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.activeSet.endedAt,expression:"activeSet.endedAt"}],attrs:{type:"date",name:""},domProps:{value:t.activeSet.endedAt},on:{input:function(e){e.target.composing||t.$set(t.activeSet,"endedAt",e.target.value)}}})])])]),t._v(" "),n("div",{staticClass:"close",on:{click:function(e){return t.$bvModal.hide("modal-2")}}},[n("img",{attrs:{src:"/images/close-modal.svg",alt:""}})])])])],1)}),[],!1,null,"95e1a77c",null);e.default=component.exports;installComponents(component,{Admin:n(283).default,Set:n(297).default})}}]);